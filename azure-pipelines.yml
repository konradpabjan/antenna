# Maven
# Build your Java project and run tests with Apache Maven.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/java

trigger:
  branches:
    include:
      - '*'

pool:
  vmImage: 'ubuntu-latest'

steps:
- script: 'wget https://www-eu.apache.org/dist/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.zip'

- task: ExtractFiles@1
  inputs:
    archiveFilePatterns: 'apache-maven-3.3.9-bin.zip'
    destinationFolder: '$(build.sourcesdirectory)/maven'

#- script: 'chmod -R 777 $(build.sourcesdirectory)/maven'
#- script: "echo '##vso[task.prependpath]$(build.sourcesdirectory)/maven'"
#- script: '$(build.sourcesdirectory)/maven/apache-maven-3.3.9/bin/mvn clean install'
- script: 'sudo chmod -R 777 /usr/share'
- script: 'mvn clean install -DinteractiveMode=false'
- script: 'sudo ls -la -R  /usr/share'
  condition: always()